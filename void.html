<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>void</title>

<style>
  body {
    background-color: black;
    color: white;
    font-family: monospace;
    overflow: hidden;
    text-align: center;
    transition: background-color 0.05s, filter 0.2s;
  }

  /* TEXTO PRINCIPAL BUGADO */
  .glitch {
    position: relative;
    font-size: 2em;
    margin-top: 30vh;
    animation: flicker 0.12s infinite;
  }

  .glitch::before,
  .glitch::after {
    content: attr(data-text);
    position: absolute;
    left: 0;
    width: 100%;
    opacity: 0.8;
  }

  .glitch::before {
    color: red;
    animation: glitch1 0.15s infinite;
  }

  .glitch::after {
    color: cyan;
    animation: glitch2 0.18s infinite;
  }

  @keyframes glitch1 {
    0% { transform: translate(3px, -3px); }
    50% { transform: translate(-3px, 3px); }
    100% { transform: translate(3px, -3px); }
  }

  @keyframes glitch2 {
    0% { transform: translate(-3px, 3px); }
    50% { transform: translate(3px, -3px); }
    100% { transform: translate(-3px, 3px); }
  }

  @keyframes flicker {
    0% { opacity: 1; }
    50% { opacity: 0.2; }
    100% { opacity: 1; }
  }

  /* INDÍCIO DE MENTIRA */
  #lie {
    margin-top: 40px;
    font-size: 0.9em;
    opacity: 0.4;
    animation: shake 0.25s infinite;
  }

  @keyframes shake {
    0% { transform: translateX(0); }
    25% { transform: translateX(-3px); }
    50% { transform: translateX(3px); }
    75% { transform: translateX(-3px); }
    100% { transform: translateX(0); }
  }

  /* MENSAGEM ESCONDIDA */
  #hidden {
    position: absolute;
    bottom: 5px;
    right: 5px;
    font-size: 0.6em;
    opacity: 0.04;
    transform: rotate(180deg);
  }

  /* RUÍDO */
  canvas {
    position: fixed;
    top: 0;
    left: 0;
    pointer-events: none;
  }
</style>
</head>

<body>

  <div class="glitch" data-text="That's not the way. The banana is your friend.">
    That's not the way. The banana is your friend.
  </div>

  <div id="lie">
    SIGNAL CORRUPTED · SOURCE UNVERIFIED
  </div>

  <div id="hidden">
    He was never an enemy, but the being from the kingdom of darkness wants your harm
  </div>

  <canvas id="noise"></canvas>

<script>
  /* ===== RUÍDO VISUAL ===== */
  const canvas = document.getElementById("noise");
  const ctx = canvas.getContext("2d");

  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  function noise() {
    const imgData = ctx.createImageData(canvas.width, canvas.height);
    for (let i = 0; i < imgData.data.length; i += 4) {
      const val = Math.random() * 255;
      imgData.data[i] = val;
      imgData.data[i + 1] = val;
      imgData.data[i + 2] = val;
      imgData.data[i + 3] = 30;
    }
    ctx.putImageData(imgData, 0, 0);
  }

  setInterval(noise, 80);

  /* ===== CORRUPÇÃO PROGRESSIVA ===== */
  let corruption = 0;
  let collapsed = false;

  const corruptionInterval = setInterval(() => {
    if (collapsed) return;

    corruption++;

    // distorção visual
    document.body.style.filter =
      `contrast(${1 + corruption * 0.25}) 
       saturate(${1 + corruption * 0.35}) 
       hue-rotate(${corruption * 12}deg)`;

    // flash branco de 1 frame
    document.body.style.backgroundColor = "white";
    setTimeout(() => {
      document.body.style.backgroundColor = "black";
    }, 30);

    if (corruption >= 6) {
      clearInterval(corruptionInterval);
      finalCollapse();
    }
  }, 2000); // MAIS RÁPIDO

  /* ===== COLAPSO FINAL ===== */
  function finalCollapse() {
    collapsed = true;

    const glitch = document.querySelector(".glitch");

    const end = document.createElement("div");
    end.innerText = "LANGUAGE FAILED";
    end.style.position = "fixed";
    end.style.top = "50%";
    end.style.left = "50%";
    end.style.transform = "translate(-50%, -50%)";
    end.style.color = "red";
    end.style.fontSize = "3em";
    end.style.opacity = "0.85";
    document.body.appendChild(end);

    let text = glitch.innerText;

    const erode = setInterval(() => {
      if (text.length <= 3) {
        glitch.innerText = "...";
        clearInterval(erode);
        return;
      }
      text = text.slice(0, -1);
      glitch.innerText = text;
    }, 250); // erosão rápida

    setTimeout(() => {
      document.body.innerHTML = "";
      document.body.style.background = "black";

      const last = document.createElement("div");
      last.innerText = "OBSERVATION WITHOUT INTERFACE";
      last.style.color = "white";
      last.style.opacity = "0.4";
      last.style.fontFamily = "monospace";
      last.style.position = "fixed";
      last.style.bottom = "10px";
      last.style.right = "10px";
      document.body.appendChild(last);
    }, 6000);
  }
</script>

</body>
</html>
